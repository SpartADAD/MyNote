# 11.4.1	环境变量

​			shell维护着一组环境变量，用来记录特定的系统信息。例如系统的名称、登录到系统上的用户名、用户的系统ID(也称为UID)、用户的默认主目录以及shell查找程序的搜索路径。可以用

```
set
```

命令来显示一份完整的当前环境变量列表。

​			在脚本中可以在环境变量名称之前加上\$使用这些环境变量。

将\$环境变量放入""中，shell也能识别除环境变量，如：

```
echo HOME: $HOME
```

但同时要注意，只要脚本在引号中出现美元符，它就会以为你在引用一个变量，如果需要直接显示美元符号，需要在$前加上\　，如

```
$ echo "The cost of the item is \$15"
```



# 11.4.2	用户变量

​			除了环境变量，shell脚本还允许在脚本中定义和使用自己的变量。定义变量允许临时存储数据并在整个脚本中使用。

​			用户变量可以是任何字母、数字或下划线组成的文本字符串，长度不超过20个
。**用户变量区分大小写**。使用等号将值赋给用户变量，**在变量、等号和值之间不能出现空格**。shell脚本会自动决定变量值的数据类型。在脚本的整个生命周期里，shell脚本中定义的变量会一直保持与它们的值，shel脚本结束时会被删除。与系统变量类似，用户变量可通过美元符引用。注意：引用一个变量值时需要使用\$，而引用变量来对其进行赋值时不要使用\$。





# 11.4.3	命令替换

​			shell脚本中最有用的特性之一可以从命令输出中提取信息，将其赋给变量。把输出赋给变量之后，就可以随意在脚本中使用了。

​			２种方法就可以将命令１输出赋给变量：

- 反引号字符( ` )
- $()格式

​			命令替换允许你将shell的命令的输出赋值给变量。如：

```
testing='date'
testing=$(date)
```

​			shell会运行命令替换符中的命令，将其输出赋给变量testing，同样的赋值等号和命令替换字符之间没有空格。

​			命令替换会创建一个子shell来运行对应的命令。子shell(subshell)是由运行该脚本的shell所创建出来的一个独立的子shell。正因如此，由该子shell所执行命令是无法使用脚本中所创建的变量的。

​			在命令行提示符下使用路径 ./ 运行命令的话，也会创建出子shell；要是运行命令的时候不加入路径，就不会创建子shell。**如果你使用的是内建的shell命令，并不会涉及子shell。**

## PS:	关于内建shell命令:

------

​			外部命令有时候也被称为文件系统命令，是存在bash shell之外的程序。它们并不是shell程序的一部分。外部命令通常位于/bin, /usr/bin, /sbin /usr/sbin中，而内建命令都是和shell编译成一体的程序，作为shell工具的组成部分存在。不需要借助外部程序文件来运行。

​			可以通过type命令查看命令是否是内建命令或者外部命令，如：

```
$ type -a ps
$ type cd
```

​			当外部命令被执行时，会创建一个子进程。这种操作被称为衍生(forking)。外部命令ps很方便显示出它的父进程以及自己所对应的衍生子进程。而内建命令不需要打开程序文件，内建命令的执行速度要更快，效率更高。

```
ps -f 
```



------

