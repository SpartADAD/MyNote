# 多态与运算符重载

## 多态

1.多态是指同样的消息（指对类的成员函数的调用）被不同类型的对象接收时导致的行为（实现，就是调用了不同的函数）

面向对象的多态性:

- 专用多态:重载多态(普通函数以及类的成员函数的重载)、强制多态（将一个变元的类型加以变换符合一个函数或者操作的要求.如:浮点与整形相加先进行强制类型转换，把整形先转换为浮点数）

- 通用多态:包含多态（类族中定义于不同类中的同名成员函数的多态行为，主要是通过虚函数来实现）、参数多态（与类模板相关联，在使用时必须赋予实际的类型才可以实例化）。

  

多态的实现：

- 编译时的多态:在编译的时候确定了同名操作的具体的操作对象

- 运行时的多态:程序运行过程中才动态地确定操作所针对的具体对象->**绑定**:这种确定操作具体对象过程->计算机程序自身彼此关联的过程->把一个标识符名和一个存储地址联系在一起的过程->用面向对象的描述：把一条消息和一个对象方法相结合

  ​	绑定:

  ​			静态绑定：绑定工作在编译连接阶段完成的情况

  ​			动态绑定/晚期绑定/后绑定：绑定工作在程序运行阶段完成情况

## 运算符重载

​	运算符重载性质（实质就是函数重载）：对已有的运算符赋予多重含义，使同一个运算符用于不同类型的数据导致不同的行为

​	运算符重载实现:在编译的时候把指定的运算表达式转化为对运算符函数的调用，将运算对象转化为运算符函数的实参，然后根据实参的类型来确定需要调用的函数



运算符重载规则：

1. ​				有几个运算符无法重载->类属性关系运算符"."，成员指针运算符".*"（前两个运算符保证C++访问成员功能含义不被改变）,作用域分辨符"::"（操作数是类型），三目运算符"?:"
2. ​				重载后运算符优先级和结合性不会改变

运算符重载形式：重载的为类的非静态成员函数和重载为非成员函数。

```
返回类型 operator 运算符(形参表)
{
    函数体
}
```

**返回类型**->重载运算符返回值类型，运算结果类型

**operator**->定义运算符重载函数的关键字

**运算符**->重载的运算符名称

**形参表**->重载运算符所需要的参数和类型



### 重载为成员函数								

​	重载为类的成员函数时：函数参数个数比原来操作数个数要少一个（后置++ --除外），重载为类的成员函数时，第一个操作数会被作为函数调用的目的对象，无需出现在参数表中，函数体中可以直接访问第一个操作数的成员

​	对于双目运算符：左操作数必须是对象本身的数据（类内本身的私有成员），由this指针指出，右操作数则需要通过运算符重载函数参数表传递。如 双目重载运算符B：oprd1 B oprd2，oprd1为A类对象，把B重载为A类的成员函数，该函数形参为 oprd2所属的类型 

**oprd1 B oprd2->相当于函数调用oprd1.operator B(oprd2)**

​	对于前置单目运算符：操作数由对象的this指针给出，不需要任何参数,如:"-"(负号)重载为类的成员函数，用于实现U oprd，U为单目运算符,oprd为A类对象，则U应当重载为A的成员函数      

**U oprd->相当于函数调用oprd.operator   U()**

​	对于后置运算符"++"和"--"如果将他们重载为类的成员函数用来实现表达式oprd++或oprd--，其中oprd为A类的对象,运算符重载为A类的成员函数，**这时候函数要带有一个整形(int)形参** ，**前置单目运算符和后置单目运算符最主要的区别就是形参**，**前置单目运算符重载为成员函数没有形参**。

oprd++ ->函数调用oprd.operator++(0),**这时候int 类型参数不起任何作用**，用于区别后置++，--与前置++和--.

### 重载为非成员函数

重载为非成员函数时:函数参数个数与原操作数个数相同

**重载为非成员函数运算符时，需要访问运算符参数所涉及类的私有成员，这是可以把该重载函数声明为类的友元函数**



```
example:


class A{
public:
	int liCun;
    
    friend void operator(int,A);
}

friend void operator+(int a,A temp)
{
    	temp.liCun += a;
}

```



- 编译时的多态：编译过程中确定同名操作的具体操作对象

- 运行时的多态：程序运行过程中才动态地确定操作所针对的具体对象->这个过程也叫**绑定**（指计算机程序自身彼此关联的过程->把一个标识符和一个存储地址联系在一起的过程->用面对对象的术语来说就是把一条消息和一个对象方法相结合的过程）

  ​	绑定:

  ​	`

  